# Supabase 備份和日誌功能說明

## 📋 功能說明

### 1. "Daily backups stored for 7 days" - 每日備份保留 7 天

#### 含義
- **每日自動備份**：Supabase 會每天自動備份你的資料庫
- **保留 7 天**：最近的 7 個備份會被保留
- **自動管理**：超過 7 天的備份會自動刪除

#### 實際運作
```
今天：備份 1（最新）
昨天：備份 2
2 天前：備份 3
3 天前：備份 4
4 天前：備份 5
5 天前：備份 6
6 天前：備份 7
7 天前：備份 8（會被自動刪除）
```

#### 使用場景
- ✅ 如果今天資料誤刪，可以使用昨天的備份還原
- ✅ 如果 3 天前資料有問題，可以使用 3 天前的備份還原
- ✅ 最多可以還原到 7 天前的資料

#### 注意事項
- ⚠️ 只有 **Pro 方案** 才提供自動備份
- ⚠️ **Free 方案** 可能不提供自動備份，需要手動備份
- ⚠️ 超過 7 天的備份無法恢復

---

### 2. "7-day log retention" - 7 天日誌保留

#### 含義
- **日誌記錄**：Supabase 會記錄系統操作日誌
- **保留 7 天**：最近的 7 天日誌會被保留
- **自動清理**：超過 7 天的日誌會自動刪除

#### 日誌內容
日誌可能包含：
- 資料庫查詢記錄
- API 請求記錄
- 錯誤日誌
- 系統操作記錄
- 性能監控資料

#### 使用場景
- ✅ 查看最近的錯誤記錄
- ✅ 追蹤系統操作歷史
- ✅ 分析性能問題
- ✅ 安全審計

#### 注意事項
- ⚠️ 日誌主要用於系統監控和除錯
- ⚠️ 超過 7 天的日誌無法查看
- ⚠️ 如果需要長期保留，需要手動匯出

---

## 🔍 詳細說明

### 每日備份（Daily Backups）

#### 備份內容
- ✅ 所有資料表結構（Schema）
- ✅ 所有資料內容（Data）
- ✅ 索引和約束
- ✅ 用戶資料和設定

#### 備份時間
- 通常是每天凌晨自動執行
- 具體時間由 Supabase 決定

#### 如何查看和使用備份

1. **查看可用備份**
   - 前往 Supabase Dashboard
   - Database → Backups
   - 查看可用的備份列表

2. **下載備份**
   - 點擊備份旁邊的 "Download" 按鈕
   - 下載 SQL 格式的備份檔案

3. **還原備份**
   - 在 SQL Editor 中執行備份檔案
   - 或使用命令列工具還原

---

### 日誌保留（Log Retention）

#### 日誌類型

1. **資料庫日誌**
   - 查詢執行記錄
   - 錯誤訊息
   - 性能指標

2. **API 日誌**
   - API 請求記錄
   - 回應時間
   - 錯誤記錄

3. **系統日誌**
   - 系統操作記錄
   - 安全事件
   - 配置變更

#### 如何查看日誌

1. **在 Supabase Dashboard**
   - Logs → Database Logs
   - Logs → API Logs
   - Logs → System Logs

2. **日誌查詢**
   - 可以按時間範圍查詢
   - 可以按關鍵字搜尋
   - 可以過濾特定類型的日誌

---

## 📊 方案對比

### Free 方案
- ❌ 可能不提供自動備份
- ❌ 日誌保留時間可能較短
- ✅ 需要手動備份

### Pro 方案（$25/月）
- ✅ 每日自動備份，保留 7 天
- ✅ 7 天日誌保留
- ✅ 可以下載備份檔案

### Team 方案（$599/月）
- ✅ 更長的備份保留時間
- ✅ 更長的日誌保留時間
- ✅ 更多進階功能

---

## 🎯 實際應用

### 情境 1：資料誤刪

**情況**：今天不小心刪除了重要資料

**解決方法**：
1. 前往 Supabase Dashboard → Backups
2. 下載昨天的備份檔案
3. 還原備份到 Supabase
4. Web APP 會自動顯示還原的資料

### 情境 2：查看錯誤記錄

**情況**：系統出現錯誤，想查看詳細記錄

**解決方法**：
1. 前往 Supabase Dashboard → Logs
2. 選擇時間範圍（最近 7 天內）
3. 搜尋錯誤關鍵字
4. 查看詳細錯誤訊息

### 情境 3：長期備份需求

**情況**：需要保留超過 7 天的備份

**解決方法**：
1. 定期手動下載備份檔案
2. 保存到本地硬碟或雲端
3. 建立自己的備份策略

---

## ⚠️ 重要提醒

### 關於自動備份

1. **方案限制**
   - Free 方案可能不提供自動備份
   - 建議手動備份或升級方案

2. **備份保留時間**
   - 只有 7 天的備份可用
   - 超過 7 天無法恢復

3. **備份內容**
   - 只包含資料庫資料
   - 不包含 Supabase 設定和配置

### 關於日誌保留

1. **日誌用途**
   - 主要用於系統監控和除錯
   - 不是用於資料備份

2. **日誌內容**
   - 可能包含敏感信息
   - 需要適當的權限才能查看

3. **日誌保留時間**
   - 只有 7 天的日誌可用
   - 超過 7 天無法查看

---

## 🔧 建議策略

### 1. 多重備份策略

```
自動備份（Supabase） + 手動備份（本地/雲端）
```

- ✅ Supabase 自動備份：7 天內快速恢復
- ✅ 手動備份：長期保留（每月或每季）

### 2. 定期下載備份

- ✅ 每週下載一次備份檔案
- ✅ 保存到本地硬碟或雲端
- ✅ 建立備份檔案命名規則

### 3. 監控日誌

- ✅ 定期查看錯誤日誌
- ✅ 監控系統性能
- ✅ 記錄重要操作

---

## 📝 總結

### "Daily backups stored for 7 days"
- **含義**：每日自動備份，保留 7 天
- **用途**：快速恢復誤刪的資料
- **限制**：只有 7 天的備份可用

### "7-day log retention"
- **含義**：日誌保留 7 天
- **用途**：系統監控和除錯
- **限制**：只有 7 天的日誌可用

### 建議
- ✅ 利用自動備份快速恢復
- ✅ 定期手動備份長期保留
- ✅ 定期查看日誌監控系統

---

## 🔗 相關文件

- `docs/SUPABASE_BACKUP_GUIDE.md` - 備份指南
- `docs/RESTORE_BACKUP_GUIDE.md` - 還原指南
- `docs/BACKUP_FILE_FORMAT.md` - 備份檔案格式
